/* eslint max-len: 0 */
/* eslint max-len: 0 */

const { US_STATES } = require('..');
const Field = require('./validations');
const {
  debtAmount: { group: debtAmounts },
} = require('./shared-fields');

const { zip, email, ssn, phone, text, date } = Field.FieldValidation;

const { autoGeneratedDescriptionText } = require('./constants');

module.exports = {
  disputeProcess: 1,
  nowWhat: `
    If you selected to mail the dispute yourself, please follow the instructions in the downloadable document that you can access at the link below.
    <br><br>
    If you selected to have us mail your dispute, we will send it to the agencies you specified. The dispute process can take up to 30 days. You should hear a response directly from each of the agencies.
    <br><br>
    Please report the results of your dispute on the community page so we can make sure your rights are being respected and that errors on your report are removed.
  `,
  options: {
    none: {
      title: 'Gather Materials',
      description: `
        Please have a photo of your picture ID ready to upload (taking a picture with your camera phone is fine).
        <br><br> 
        Please make a list of all the errors that you want to dispute and be prepared to write a short statement explaining why those items should not negatively impact your credit. You will also have the option to upload a document highlighting errors on your report.
        <br><br> 
        Please prepare all these materials before beginning this dispute. Once you begin, it will only take a few minutes to complete the dispute. Once you complete the dispute, a hard copy will be mailed to the credit reporting agency or agencies.',
      `,
      steps: [
        {
          type: 'form',
          name: 'personal-information-form',
          title: 'Personal Information',
          description: 'Here we need some personal, school and employment information.',
          fieldSets: [
            debtAmounts,
            {
              title: 'Personal Information',
              fields: [
                [
                  new Field({
                    name: 'name',
                    label: 'Your Full Name',
                    columnClassName: 'md-col-8',
                    validations: text,
                  }),
                  new Field({
                    name: 'dob',
                    label: 'Your date of birth?',
                    type: 'date',
                    columnClassName: 'md-col-4',
                    validations: date,
                  }),
                ],
                [
                  new Field({
                    name: 'ssn',
                    label: 'Your SSN',
                    columnClassName: 'md-col-12',
                    validations: ssn,
                  }),
                ],
                [
                  new Field({
                    name: 'address',
                    label: 'Your Mailing Address',
                    validations: text,
                  }),
                ],
                [
                  new Field({
                    name: 'city',
                    label: 'Your City',
                    columnClassName: 'md-col-5',
                    validations: text,
                  }),
                  new Field({
                    name: 'state',
                    label: 'Your State',
                    columnClassName: 'md-col-4',
                    type: 'dropdown',
                    options: US_STATES,
                    validations: [`oneOf:${US_STATES.join(', ')}:false`],
                  }),
                  new Field({
                    name: 'zip-code',
                    label: 'Your Zip Code',
                    columnClassName: 'md-col-3',
                    validations: zip,
                  }),
                ],
                [
                  new Field({
                    name: 'email',
                    label: 'Your email',
                    columnClassName: 'md-col-6',
                    validations: email,
                  }),
                  new Field({
                    name: 'phone',
                    label: 'Your telephone',
                    columnClassName: 'md-col-6',
                    validations: phone,
                  }),
                ],
                [
                  new Field({
                    name: 'currentCreditor',
                    label: 'Current Creditor',
                    columnClassName: 'md-col-12',
                    required: false,
                  }),
                ],
                [
                  new Field({
                    name: 'originalCreditor',
                    label: 'Original Creditor',
                    columnClassName: 'md-col-12 mb1',
                    required: false,
                  }),
                ],
                [
                  new Field({
                    subtitle: 'Reporting agencies your dispute will be sent to',
                    type: 'group',
                    name: 'agencies',
                    label: 'Agencies',
                    validations: ['oneOf: Experian, Equifax, TransUnion :true'],
                    customSelector: {
                      DOM() {
                        const elements = document.querySelectorAll('[name="fieldValues[agencies]"');
                        const values = Array(3);
                        elements.forEach((el, i) => {
                          values[i] = el.checked ? el.value : undefined;
                        });
                        return values.filter(d => d);
                      },
                    },
                    fields: [
                      [
                        {
                          name: 'agencies',
                          label: 'Experian',
                          type: 'checkbox',
                          attributes: {
                            value: 'Experian',
                            'data-custom-selector': 'true',
                          },
                        },
                      ],
                      [
                        {
                          name: 'agencies',
                          label: 'Equifax',
                          type: 'checkbox',
                          attributes: {
                            value: 'Equifax',
                            'data-custom-selector': 'true',
                          },
                        },
                      ],
                      [
                        {
                          name: 'agencies',
                          label: 'TransUnion',
                          type: 'checkbox',
                          attributes: {
                            value: 'TransUnion',
                            'data-custom-selector': 'true',
                          },
                        },
                      ],
                    ],
                  }),
                ],
              ],
            },
          ],
        },
        {
          type: 'information',
          name: 'credit-dispute-letter',
          title: 'Credit Report Dispute Letter',
          description: autoGeneratedDescriptionText,
          footer:
            'This is an auto-generated form, you need to fill the {link to open the previous form} first.',
        },
        {
          type: 'upload',
          name: 'picture-id-uploader',
          multiple: false,
          optional: false,
          mimeTypes: ['image/jpeg', 'image/png'],
          maxFileSize: 5242880,
          title: 'Picture ID',
          description: 'Please attach a photo of your picture ID. ',
          uploadButtonText: 'Upload file',
          footerNotes: 'JPEG, PNG format',
        },
        {
          type: 'upload',
          name: 'credit-errors-uploader',
          multiple: true,
          optional: false,
          mimeTypes: ['image/jpeg', 'image/png', 'application/pdf'],
          maxFileSize: 5242880,
          title: 'Credit report errors',
          description: 'Please attach a document highlighting credit report errors.',
          uploadButtonText: 'Upload files',
          footerNotes: 'JPEG, PNG, PDF format',
        },
      ],
    },
  },
};
