extends ../layouts/application.pug

block title
  | #{user.account.fullname} — The Debt Collective

block styles
  link(href="/build/stylesheets/users/show.css" rel="stylesheet")

block content
  .ProfileWrapper.wrapper.py4.px2.flex.items-center.relative
    .Profile__map.absolute.left-0.right-0.bottom-0
    .max-width-3.mx-auto.relative.-fw
      .clearfix
        .Profile__image-wrapper.relative.right.sm-col-4.col-12
          if (user.account.image.exists('medium'))
            img.block.-fw(src=user.account.image.url('medium') alt=user.account.fullname)
          else
            img.block.-fw(src='/images/profile/placeholder.png')
        .col.sm-col-8.col-12
          .Profile__info-wrapper.flex.flex-column.pt3.pr3.pb2.pl3
            .flex-auto
              h3.pb2= user.account.fullname
              p.pb2.-caption.-fw-700.-accent= user.account.state
              p.-fw-700= user.account.bio
            .flex.pt4
              if currentUser && currentUser.id === user.id
                a(href=routeMappings.Users.edit.url(currentUser.id) class="-caption -fw-700" role="button" tabindex="0")
                  svg.mr1(width="11" height="11"): use(xlink:href="#svg-pencil")
                  | Edit profile
              if user.account.socialLinks
                ul.list-reset.center.flex-auto
                  each val, index in user.account.socialLinks
                    li.inline-block.align-top.mx2
                      a.block.-white(
                        href=val
                        rel="noopener noreferrer"
                        target="_blank"
                        role="button"
                        tabindex="0"
                        title=`${user.account.fullname}’s ${index}`
                      )
                        svg(width="18" height="18"): use(xlink:href=`#svg-${index}`)
                        .sr-only=`${user.account.fullname}’s ${index}`

          if user.disputes
            .-bg-neutral-dark.px3.pb3
              hr.mb3
              h4.-accent My tools
              each dispute in user.disputes
                .clearfix.pt2.mxn1
                  .col.col-9.px1
                    .-fw-700
                      a(href=routeMappings.Disputes.show.url(dispute.id))
                        | #{dispute.disputeTool.name}
                        if dispute.data.option !== 'none'
                          |  / #{dispute.data.option}
                  .col.col-3.px1.right-align
                    .pt1.-caption.-ttu.-fw-700= dispute.statuses[0].status

block scripts
  script(src="/build/javascripts/users/show.js" async)
  script.
    window.addEventListener('load', function() {
      var options = {
        currentUser: !{JSON.stringify(currentUser)},
        currentURL: !{JSON.stringify(currentURL)},
      };
      new ViewUsersShow(options);
    }, true);
